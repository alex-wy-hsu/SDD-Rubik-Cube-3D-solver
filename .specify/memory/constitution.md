<!--
同步影響報告
==================
版本變更：N/A → 1.0.0
初始憲章批准，建立四項核心原則。

修改的原則：N/A（初始版本）

新增章節：
- 核心原則（4 項原則：代碼品質、測試標準、用戶體驗一致性、性能要求）
- 開發標準
- 治理規範

移除章節：N/A（初始版本）

需要更新的模板：
✅ plan-template.md - 憲章檢查部分與新原則對齊
✅ spec-template.md - 需求部分與品質/性能標準對齊
✅ tasks-template.md - 任務分類反映測試優先和品質原則
✅ checklist-template.md - 無需更改（通用模板）
✅ agent-file-template.md - 無需更改（自動生成）

後續待辦事項：無
-->

# SDD 魔術方塊 3D 求解器憲章

## 核心原則

### 一、代碼品質（不可妥協）

代碼必須具備可維護性、可讀性，並遵循既定模式：

- **單一職責**：每個模組、類別和函數必須有一個明確的目的
- **DRY 原則**：必須消除代碼重複；將共享邏輯提取為可重用的元件
- **命名規範**：名稱必須具描述性且一致；除非是領域標準（例如 RGB、HTTP），否則避免使用縮寫
- **文檔**：公共 API、複雜演算法和非顯而易見的邏輯必須包含內聯文檔
- **代碼審查**：所有代碼變更必須在合併前由至少一位其他開發者審查
- **Linting**：代碼必須通過自動化 linting 檢查且零警告；配置文件定義在儲存庫中

**理由**：高品質代碼可減少技術債務、提升團隊效率，並使重構更有信心。魔術方塊求解器涉及複雜演算法，需要清晰、可維護的代碼以確保正確性和可擴展性。

### 二、測試標準（不可妥協）

測試驅動開發（TDD）是強制性的；需要全面的測試覆蓋率：

- **測試優先**：測試必須在實作代碼之前編寫；測試必須初始失敗
- **紅綠重構**：嚴格執行 TDD 循環：編寫失敗的測試 → 實作最小代碼使其通過 → 重構
- **覆蓋率要求**：
  - 單元測試：所有模組最低 80% 覆蓋率
  - 整合測試：所有公共 API 和用戶場景必須測試
  - 契約測試：所有外部介面（如有）必須具備契約驗證
- **測試組織**：測試必須按類型（單元、整合、契約）在獨立目錄中組織
- **測試獨立性**：每個測試必須能獨立運行，不依賴執行順序
- **邊界情況**：測試必須涵蓋邊界條件、錯誤狀態和無效輸入

**理由**：魔術方塊求解器具有複雜的狀態管理和演算法邏輯，有許多邊界情況。TDD 確保正確性、防止回歸，並提供預期行為的活文檔。

### 三、用戶體驗一致性

用戶互動必須直觀、可預測且一致：

- **視覺一致性**：3D 渲染必須使用一致的顏色、方向和透視慣例
- **方塊標記法**：必須遵循標準魔術方塊標記法（Singmaster 標記法）用於移動和演算法
- **互動模式**：用戶輸入（滑鼠、鍵盤、觸控）在所有功能中必須行為一致
- **反饋**：用戶操作必須提供即時的視覺或文字反饋；不允許靜默失敗
- **錯誤訊息**：錯誤訊息必須清晰、可操作且用戶友好（非技術堆疊追蹤）
- **性能感知**：操作必須感覺響應迅速；對於超過 200ms 的操作使用載入指示器
- **無障礙性**：UI 必須支援鍵盤導航；為視覺元素提供替代文字

**理由**：3D 方塊求解器本質上是視覺化和互動性的。一致的 UX 降低學習曲線和挫折感，使工具對初學者和速解者都易於使用。

### 四、性能要求

應用程式必須滿足可量化的性能基準：

- **渲染性能**：
  - 3D 方塊渲染在動畫和旋轉期間必須維持 60 FPS
  - 幀率低於 30 FPS 是不可接受的
- **演算法性能**：
  - 方塊狀態驗證必須在 <10ms 內完成
  - 可解狀態的解法生成必須在 <5 秒內完成最優解
  - 打亂生成必須在 <100ms 內完成
- **記憶體限制**：
  - 應用程式記憶體佔用在正常運行時必須保持在 200MB 以下
  - 不允許記憶體洩漏；長時間運行的會話必須保持穩定的記憶體使用
- **載入時間**：
  - 初始應用程式載入必須在 <3 秒內完成
  - 功能初始化必須在 <500ms 內完成
- **可擴展性**：
  - 必須支援深度達 100 步的方塊狀態而不降低性能
  - 必須處理快速的用戶輸入（>10 步/秒）而不掉幀

**理由**：性能直接影響用戶滿意度和實用性。緩慢的渲染會造成令人沮喪的體驗，而緩慢的求解會違背自動求解器的目的。性能基準確保工具保持實用性和競爭力。

## 開發標準

### 規格驅動開發（SDD）

所有功能必須遵循 SDD 工作流程：

1. **規格優先**：建立詳細規格，包含用戶故事、需求和驗收標準
2. **規劃**：定義技術方法、架構和任務分解
3. **測試優先**：在實作之前為每個用戶故事編寫測試
4. **分階段實作**：逐個故事構建功能，驗證獨立性
5. **驗證**：在繼續之前驗證每個故事獨立運作

### 品質閘門

在合併任何代碼之前：

- [ ] 所有測試通過（單元、整合、契約測試，視情況而定）
- [ ] 代碼覆蓋率滿足閾值（80% 單元測試，100% 用戶故事整合測試）
- [ ] Linting 通過且零警告
- [ ] 代碼審查由至少一位審查者批准
- [ ] 滿足性能基準（如適用於變更）
- [ ] 文檔已更新（README、內聯文檔、規格）
- [ ] 已驗證憲章符合性

### 提交標準

- 提交必須遵循約定式提交格式：`type(scope): description`
- 類型：`feat`、`fix`、`docs`、`refactor`、`test`、`perf`、`chore`
- 提交必須是原子性且專注的；每次提交一個邏輯變更
- 提交訊息在適用時必須參考相關的規格/任務編號

## 治理規範

### 權力

本憲章取代所有其他開發實踐和慣例。本文件與其他指導原則之間的任何衝突必須以憲章為準。

### 修正程序

1. 提議的修正必須在單獨的提案文件中記錄
2. 修正需要項目維護者的審查和批准
3. 版本必須按照語意化版本控制遞增：
   - **MAJOR**：向後不相容的變更（移除/重新定義原則）
   - **MINOR**：新增原則或章節
   - **PATCH**：澄清、措辭改進、筆誤修正
4. 修正在批准後立即生效
5. 修正後，相關模板和文檔必須在1週內更新

### 符合性審查

- 所有代碼審查必須明確驗證憲章符合性
- 違規必須在複雜度追蹤中註明理由並記錄
- 未經註明理由的重複違規是代碼拒絕的理由

### 複雜度註明

如果某功能需要違反憲章原則，必須：

- 記錄具體違規項
- 解釋為何違規是必要的
- 描述被拒絕的更簡單替代方案及其原因
- 在功能規劃中包含此註明

### 執行

憲章符合性通過以下方式執行：

- 自動化檢查（linting、測試覆蓋率、性能基準）
- 手動代碼審查驗證
- 合併前品質閘門
- CI/CD 管道整合

**版本**：1.0.0 | **批准日期**：2026-01-03 | **最後修正**：2026-01-03
